//
//  WideFloat_Buffer_UnitTests.swift
//  
//
//  Created by Chip Jarred on 9/16/20.
//

import XCTest
@testable import BigMath

// -------------------------------------
class WideFloat_Buffer_UnitTests: XCTestCase
{
    // -------------------------------------
    func callRoundingBit(for x: [UInt], shift: Int) -> UInt
    {
        var x = x
        return x.withUnsafeMutableBufferPointer
        {
            let buff = FloatingPointBuffer(
                rawSignificand: $0[...],
                exponent: 0
            )
            return buff.roundingBit(forRightShift: shift)
        }
    }
    
    // -------------------------------------
    #if arch(x86_64) || arch(arm64)
    func test_func_roundingBit_method_calculates_correct_bit_to_add_for_bankers_rounding()
    {
        typealias TestCase = (x: [UInt], shift: Int, expected: UInt)
        let testCases: [TestCase] =
        [
            // One digit cases
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 1,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            
            // Two digit cases, rounding least signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),

            
            // Two digit cases, rounding most signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 1 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            
            // Two digit cases, rounding most signficant digit with bits
            // crossing digit boundary
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),

        ]
        
        for (x, shift, expected) in testCases
        {
            let roundingBit = callRoundingBit(for: x, shift: shift)
            
            if roundingBit != expected
            {
                print("----------- Failing case:")
                print("x = 0b", terminator: "")
                var sep = ""
                for digit in x.reversed()
                {
                    print("\(sep)\(binary: digit)", terminator: "")
                    sep = "_"
                }
                print("\n   shift: \(shift)")
                print("expected: \(expected)")
                print("  actual: \(roundingBit)")
            }
            
            XCTAssertEqual(roundingBit, expected)
        }
    }
    #else
    // If you're on a 64-bit platform not listed in the #if, add it to the #if
    #warning("Omitted 64-bit test for 32-bit platform: test_func_roundingBit_method_calculates_correct_bit_to_add_for_bankers_rounding")
    #endif
}
