//
//  WideFloat_Buffer_UnitTests.swift
//  
//
//  Created by Chip Jarred on 9/16/20.
//

import XCTest
@testable import BigMath

// -------------------------------------
class WideFloat_Buffer_UnitTests: XCTestCase
{
    // -------------------------------------
    func callRoundingBit(for x: [UInt], shift: Int) -> UInt
    {
        var x = x
        x.append(0)
        return x.withUnsafeMutableBufferPointer
        {
            let buff = FloatingPointBuffer(wideFloatUIntBuffer: $0[...])
            return roundingBit(
                forRightShift: shift,
                of: buff.significand.immutable
            )
        }
    }
    
    // -------------------------------------
    func callRightShiftForAddOrSubtract(
        for x: [UInt],
        exponent: Int,
        shift: Int) -> (significand: [UInt], exponent: Int)
    {
        var x = x
        x.append(UInt(bitPattern: exponent))
        var exponent = exponent
        x.withUnsafeMutableBufferPointer
        {
            var buff = FloatingPointBuffer(wideFloatUIntBuffer: $0[...])
            buff.rightShiftForAddOrSubtract(by: shift)
            exponent = buff.exponent.intValue
        }
        
        return (x.dropLast(), exponent)
    }
    
    // -------------------------------------
    #if arch(x86_64) || arch(arm64)
    /*
     This test uses 64-bit binary integer literals that won't compile on 32-bit
     systems.
     */
    func test_func_roundingBit_method_calculates_correct_bit_to_add_for_bankers_rounding()
    {
        typealias TestCase = (x: [UInt], shift: Int, expected: UInt)
        let testCases: [TestCase] =
        [
            // One digit cases
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 1,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                ],
                shift: 3,
                expected: 1
            ),
            
            // Two digit cases, rounding least signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 2,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3,
                expected: 1
            ),

            
            // Two digit cases, rounding most signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 1 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 1 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                shift: 2 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                shift: 2 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Most significant
                ],
                shift: 3 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Most significant
                ],
                shift: 3 + 64,
                expected: 1
            ),
            
            // Two digit cases, rounding most signficant digit with bits
            // crossing digit boundary
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 0
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                shift: 0 + 64,
                expected: 1
            ),

        ]
        
        for (x, shift, expected) in testCases
        {
            let roundingBit = callRoundingBit(for: x, shift: shift)
            
            if roundingBit != expected
            {
                print("----------- Failing case:")
                print("x = 0b", terminator: "")
                var sep = ""
                for digit in x.reversed()
                {
                    print("\(sep)\(binary: digit)", terminator: "")
                    sep = "_"
                }
                print("\n   shift: \(shift)")
                print("expected: \(expected)")
                print("  actual: \(roundingBit)")
            }
            
            XCTAssertEqual(roundingBit, expected)
        }
    }
    #else
    // If you're on a 64-bit platform not listed in the #if, add it to the #if
    #warning("Omitted 64-bit test for 32-bit platform: test_func_roundingBit_method_calculates_correct_bit_to_add_for_bankers_rounding")
    #endif
    
    // -------------------------------------
    #if arch(x86_64) || arch(arm64)
    /*
     This test uses 64-bit binary integer literals that won't compile on 32-bit
     systems.
     */
    func test_rightShiftForAddSubtract()
    {
        typealias TestCase = (
            x: [UInt],
            exponent: Int,
            shift: Int,
            expected: [UInt],
            expectedExponent: Int
        )
        let testCases: [TestCase] =
        [
            // One digit cases
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                exponent: 0,
                shift: 0,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                exponent: 0,
                shift: 0,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b01111111_11111111_11111111_11111111__11111111_11111111_11111111_11111110, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00111111_11111111_11111111_11111111__11111111_11111111_11111111_11111111, // Least significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b01111111_11111111_11111111_11111111__11111111_11111111_11111111_11111111, // Least significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b01000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                ],
                expectedExponent: 1
            ),

            // Two digit cases, rounding least signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 0
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 2,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 2
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 3
            ),
            (
                x:
                [
                    0b11111111_11111111_11111111_11111111__11111111_11111111_11111111_11111111, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),

            
            // Two digit cases, rounding most signficant digit
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 1 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 65
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 1 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 65
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                exponent: 0,
                shift: 1 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 65
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                exponent: 0,
                shift: 1 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 65
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                exponent: 0,
                shift: 2 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 66
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000011, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000100, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000101, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000110, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000111, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001000, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001001, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001010, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001011, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001100, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001101, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001110, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00001111, // Most significant
                ],
                exponent: 0,
                shift: 3 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 67
            ),
            
            // Two digit cases, rounding most signficant digit with bits
            // crossing digit boundary
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b00000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b10000000_00000000_00000000_00000000__10000000_00000000_00000000_00000000, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000001, // Most significant
                ],
                exponent: 0,
                shift: 0 + 64,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000010, // Least significant
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 64
            ),
            (
                x:
                [
                    0b11111111_11111111_11111111_11111111__11111111_11111111_11111111_11111111, // Least significant
                    0b01111111_11111111_11111111_11111111__11111111_11111111_11111111_11111111, // Most significant
                ],
                exponent: 0,
                shift: 1,
                expected:
                [
                    0b00000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Least significant
                    0b01000000_00000000_00000000_00000000__00000000_00000000_00000000_00000000, // Most significant
                ],
                expectedExponent: 1
            ),
        ]
        
        for (x, exponent, shift, expected, expectedExponent) in testCases
        {
            let (y, yExponent) = callRightShiftForAddOrSubtract(
                for: x,
                exponent: exponent,
                shift: shift
            )
            
            XCTAssertEqual(y, expected)
            XCTAssertEqual(yExponent, expectedExponent)
        }
    }
    #else
    // If you're on a 64-bit platform not listed in the #if, add it to the #if
    #warning("Omitted 64-bit test for 32-bit platform: test_rightShiftForAddSubtract")
    #endif
}
